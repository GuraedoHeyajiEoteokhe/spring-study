# 테스트 코드

### 테스트 코드

- 테스트 코드 개념
    
    작성한 코드가 의도대로 잘 동작하고 예상치 못한 문제가 있는지 확인할 목적으로 작성하는 코드
    
    테스트 코드는 given, when, then 패턴으로 구성되어있다.
    
    - given : 테스트 실행을 준비하는 단계
    - when : 테스트를 진행하는 단계
    - then : 테스트 결과를 검증하는 단계
- 스프링 부트 스타터 테스터
    - JUnit
        
        자바 프로그래밍 언어용 단위 테스트 프레임 워크
        
    - Spring Test & Spring Boot Test
        
        스프링 부트 애플리케이션을 위한 통합 테스트 지원
        
    - AssertJ
        
        검증문인 어설션을 작성하는 데 사용되는 라이브러리
        
    - Hamcrest
        
        표현식을 이해하기 쉽게 만드는 데 사용되는 Matcher 라이브러리
        
    - Mockito
        
        테스트에 사용할 가짜 객체인 목 객체를 쉽게 만들고, 관리하고, 검증할 수 있게 지원하는 테스트 프레임워크
        
    - JSONassert
        
        JSON용 어설션 라이브러리
        
    - JsonPath
        
        JSON 데이터에서 특정 데이터를 선택하고 검색하기 위한 라이브러리
        
- JUnit
    - 단위 테스트
        
        작성한 코드가 의도대로 작동하는지 작은 단위로 검증하는 것 → 작은단위는 대체로 Method로 사용
        
    - Junit의 특징
        - 테스트 방식을 구분할 수 있는 어노테이션을 제공
        - @Test 어노테이션으로 메서드를 호출할 때마다 새 인스턴스를 생성해서 독립 테스트 구현
        - 예상 결과를 검증하는 어설션 메서드 제공
        - 사용 방법이 단순하여 테스트 코드 작성 시간이 적음
    - Junit의 어노테이션
        - @BeforeAll
            
            전체 테스트를 시작하기 전에 처음으로 한번만 실행한다.
            
            전체 테스트 실행 주기에서 한 번만 호출되어야 하기 때문에 메서드를 static으로 선언
            
        - @BeforeEach
            
            테스트가 시작하기 전 매번 실행
            
            객체를 초기화하거나 테스트에 필요한 값을 미리 넣을때 사용 가능
            
        - @AfterAll
            
            전체 테스트를 마치고 종료하기 전 한번만 실행
            
            전체 테스트 실행 주기에서 한번만 호출되어야 하므로 static으로 선언
            
        - @AfterEach
            
            각 테스트를 종료하기 전 매번 실행
            
            테스트 이후 특정 데이터를 삭제해야 하는 경우 사용
            
- AssertJ
    
    Junit과 함께 사용해 검증문의 가독성을 확 높여주는 라이브러리
    
    - EqualTO
        
        값이 같거나 다른지 검증
        
    - contains
        
        값을 포함하거나 포함하지 않는지 검증
        
    - With
        
        접미사, 접두사가 입력값인지 검증
        
    - Empty
        
        비어있는지 비어있지않는지 검증
        
    - Positive, Negative
        
        양수인지 음수인지 검증
        
    - Than(1)
        
        1보다 큰값인지 작은값인지 검증
        

# 데이터베이스

- ORM
    
    자바의 객체와 데이터베이스를 연결하는 프로그래밍 기법
    
    자바의 언어만으로 SQL문을 사용하지 않고 데이터베이스를 객체로 인식해 다룰 수 있게하는 도구
    
- JPA와 하이버네이트
    - JPA
        
        자바 객체와 데이터베이스를 연결해 데이터를 관리, 객체 지향 도메인 모델과 데이터베이스의 다리역할
        
    - Hibernate
        
        JPA의 인터페이스를 구현, 내부적으로 JDBC API를 사용
        
    - Entity
        - 엔티티
            
            데이터베이스의 테이블과 매핑되는 객체
            
            객체이긴 하지만 데이터베이스에 영향을 미치는 쿼리를 실행하는 객체
            
        - 엔티티 매니저
            
            데이터베이스와 애플리케이션 사이에서 객체를 생성, 수정, 삭제하는 등의 역할을 수행
            
            엔티티의 요청이 왔을때 엔티티 매니저 팩토리에서 엔티티매니저를 만들어 엔티티들의 커넥션을 수행
            
    - 영속성 컨텍스트
        - 1차 캐시
            
            1차 캐시의 키는 엔티티의 @Id 어노테이션이 달린 기본키 역할을 하는 식별자, 값은 엔티티로 구성
            
            엔티티를 조회할 때 1차 캐시를 확인해서 값이 있으면 반환, 값이 없으면 저장 후 반환
            
        - 쓰기 지연
            
            트랜젝션을 커밋하기 전까지 데이터베이스에 실제로 질의문을 보내지 않고 쿼리를 모았다가 트랜잭션을 커밋할때 모았던 쿼리를 한번에 실행하는 것을 의미
            
        - 변경 감지
            
            트랜잭션을 커밋하면 1차 캐시에 저장되어 있는 엔티티의 값과 현재 엔티티의 값을 비교해서 변경된 값이 있다면 변경 사항을 데이터베이스에 자동 반영
            
        - 지연 로딩
            
            쿼리를 요청할 때 필요할 때 쿼리를 날려 데이터베이스를 조회하는것
            
    - 엔티티의 상태
        - 분리 상태 : 영속성 컨텍스트가 관리하고 있지 않는 상태
        - 관리 상태 : 영속성 컨텍스트가 관리하는 상태
        - 비영속 상태 : 영속성 컨텍스트와 전혀 관계가 없는 비영속 상태
        - 삭제된 상태 : remove() 메서드를 사용해 엔티티의 를 삭제한 상태

## 2주차 정리 리뷰

JPA를 통해 데이터베이스에 접근해 자바에서 SQL을 사용하지 않고 데이터 베이스에 CRUD를 수행하고 TEST코드를 통해 완성한 JPA 메소드들을 검증하는 것이 중요하다고 생각했다.
자신이 작성한 코드의 정확성을 확인하고 다른 오류가 나오는 것은 없나 확인하며 더욱 완벽한 코드를 작성할 수 있을 것 같다.